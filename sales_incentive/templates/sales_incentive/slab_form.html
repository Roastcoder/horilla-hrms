{% load i18n %}
<div class="oh-modal__dialog-body">
    <form method="post" id="slabForm">
        {% csrf_token %}
        <div class="oh-input-group">
            <label class="oh-input__label" for="min_amount">{% trans "Min Amount (Lac)" %} *</label>
            <input 
                type="number" 
                step="0.01"
                name="min_amount" 
                id="min_amount"
                class="oh-input"
                value="{% if slab %}{{ slab.min_amount }}{% endif %}"
                required
            />
        </div>
        
        <div class="oh-input-group">
            <label class="oh-input__label" for="max_amount">{% trans "Max Amount (Lac)" %}</label>
            <input 
                type="number" 
                step="0.01"
                name="max_amount" 
                id="max_amount"
                class="oh-input"
                value="{% if slab %}{{ slab.max_amount|default:'' }}{% endif %}"
            />
            <small class="oh-input__help-text">{% trans "Leave empty for unlimited" %}</small>
        </div>
        
        <div class="oh-input-group">
            <label class="oh-input__label" for="incentive_per_lac">{% trans "Incentive per Lac (â‚¹)" %} *</label>
            <input 
                type="number" 
                step="0.01"
                name="incentive_per_lac" 
                id="incentive_per_lac"
                class="oh-input"
                value="{% if slab %}{{ slab.incentive_per_lac }}{% endif %}"
                required
            />
        </div>
        
        <div class="oh-modal__dialog-footer">
            <button type="submit" class="oh-btn oh-btn--primary">
                {% if slab %}{% trans "Update Slab" %}{% else %}{% trans "Create Slab" %}{% endif %}
            </button>
            <button type="button" class="oh-btn oh-btn--secondary" onclick="closeModal()">
                {% trans "Cancel" %}
            </button>
        </div>
    </form>
</div>

<script>
document.getElementById('slabForm').addEventListener('submit', function(e) {
    e.preventDefault();
    
    fetch(this.action || window.location.href, {
        method: 'POST',
        body: new FormData(this),
        headers: {
            'X-CSRFToken': document.querySelector('[name=csrfmiddlewaretoken]').value
        }
    })
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            window.location.reload();
        }
    });
});

function closeModal() {
    window.history.back();
}
</script>